import{_ as g,r,j as h,a as p,g as u,f as e,h as v,F as k,i as P,s as D,m,z as f,n as x,b as V,o as n,e as N,w as $,t as d}from"./index-RZanqM8g.js";const B={class:"pools-view"},F={class:"header"},M={class:"pools-grid"},z={class:"pool-desc"},L={class:"pool-meta"},S={key:0,class:"empty-state"},U={class:"modal"},j={class:"form-group"},A={class:"form-group"},E={class:"modal-actions"},I=["disabled"],R={__name:"PoolsView",setup(T){const _=x(),i=r([]),c=r(!0),a=r(!1),l=r({name:"",description:""});h(async()=>{await y()});async function y(){c.value=!0;try{const s=await p.getPools();i.value=s.results}catch(s){console.error("Failed to fetch pools:",s)}finally{c.value=!1}}async function w(){if(l.value.name.trim())try{const s=await p.createPool(l.value);i.value.unshift(s),a.value=!1,l.value={name:"",description:""},_.push(`/pool/${s.id}`)}catch(s){alert("Failed to create pool: "+s.message)}}function C(s){return new Date(s).toLocaleDateString()}return(s,o)=>{const b=V("router-link");return n(),u("div",B,[e("div",F,[o[5]||(o[5]=e("h1",null,"Pools",-1)),e("button",{class:"btn",onClick:o[0]||(o[0]=t=>a.value=!0)},"Create Pool")]),e("div",M,[(n(!0),u(k,null,P(i.value,t=>(n(),N(b,{key:t.id,to:`/pool/${t.id}`,class:"pool-card"},{default:$(()=>[e("h3",null,d(t.name),1),e("p",z,d(t.description||"No description"),1),e("div",L,[e("span",null,d(t.postCount)+" posts",1),e("span",null,d(C(t.createdAt)),1)])]),_:2},1032,["to"]))),128))]),i.value.length===0&&!c.value?(n(),u("div",S," No pools yet. Create one to organize your posts! ")):v("",!0),a.value?(n(),u("div",{key:1,class:"modal-overlay",onClick:o[4]||(o[4]=D(t=>a.value=!1,["self"]))},[e("div",U,[o[8]||(o[8]=e("h2",null,"Create Pool",-1)),e("div",j,[o[6]||(o[6]=e("label",null,"Name",-1)),m(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>l.value.name=t),placeholder:"Pool name"},null,512),[[f,l.value.name]])]),e("div",A,[o[7]||(o[7]=e("label",null,"Description",-1)),m(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=t=>l.value.description=t),placeholder:"Description (optional)",rows:"3"},null,512),[[f,l.value.description]])]),e("div",E,[e("button",{class:"btn btn-secondary",onClick:o[3]||(o[3]=t=>a.value=!1)},"Cancel"),e("button",{class:"btn",onClick:w,disabled:!l.value.name.trim()},"Create",8,I)])])])):v("",!0)])}}},G=g(R,[["__scopeId","data-v-54cf5d5e"]]);export{G as default};
