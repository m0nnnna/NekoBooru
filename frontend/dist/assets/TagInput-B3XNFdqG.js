import{_ as I,C as L,r as f,g as l,o as u,h,f as i,F as V,i as _,y as M,t as p,m as q,z as A,D as y,s as T,q as D}from"./index-CNhSW5AA.js";const K={class:"tag-input"},N={key:0,class:"tags-display"},z=["onClick"],E={class:"input-wrapper"},F=["placeholder","onKeydown"],$={key:0,class:"suggestions"},P=["onMousedown"],U={class:"tag-name"},j={class:"tag-count"},G={__name:"TagInput",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"Add tags (comma separated)..."}},emits:["update:modelValue"],setup(d,{emit:w}){const n=d,c=w,k=L(),s=f(""),r=f([]);let m=null;function C(e){return e.split(",").map(a=>a.trim().toLowerCase().replace(/\s+/g,"_")).filter(a=>a.length>0)}function g(){if(!s.value.trim())return;const e=C(s.value),a=[...n.modelValue];for(const t of e)t&&!a.includes(t)&&a.push(t);c("update:modelValue",a),s.value="",r.value=[]}function S(){if(s.value.includes(",")){const e=s.value.split(","),a=e.pop(),t=e.map(o=>o.trim().toLowerCase().replace(/\s+/g,"_")).filter(o=>o.length>0);if(t.length>0){const o=[...n.modelValue];for(const v of t)o.includes(v)||o.push(v);c("update:modelValue",o)}s.value=a}clearTimeout(m),m=setTimeout(async()=>{const e=s.value.trim();e.length>=1?r.value=await k.autocomplete(e):r.value=[]},150)}function x(e){c("update:modelValue",n.modelValue.filter(a=>a!==e))}function b(){if(!s.value&&n.modelValue.length>0){const e=[...n.modelValue];e.pop(),c("update:modelValue",e)}}function B(e){n.modelValue.includes(e.name)||c("update:modelValue",[...n.modelValue,e.name]),s.value="",r.value=[]}return(e,a)=>(u(),l("div",K,[d.modelValue.length>0?(u(),l("div",N,[(u(!0),l(V,null,_(d.modelValue,t=>(u(),l("span",{key:t,class:"tag"},[M(p(t)+" ",1),i("button",{onClick:o=>x(t),class:"remove-tag"},"Ã—",8,z)]))),128))])):h("",!0),i("div",E,[q(i("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),placeholder:d.placeholder,onKeydown:[y(T(g,["prevent"]),["enter"]),y(b,["backspace"])],onInput:S,onBlur:g},null,40,F),[[A,s.value]]),r.value.length>0?(u(),l("ul",$,[(u(!0),l(V,null,_(r.value,t=>(u(),l("li",{key:t.name,onMousedown:T(o=>B(t),["prevent"]),style:D({borderLeftColor:t.categoryColor})},[i("span",U,p(t.name),1),i("span",j,p(t.usageCount),1)],44,P))),128))])):h("",!0)]),a[1]||(a[1]=i("div",{class:"hint"},"Separate tags with commas or press Enter",-1))]))}},J=I(G,[["__scopeId","data-v-ba24153a"]]);export{J as T};
