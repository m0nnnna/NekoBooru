import{_ as q,C as z,r as f,g as r,o as i,h as w,f as c,F as T,i as C,y as E,t as h,m as K,z as N,D as v,s as g,q as $,A as F}from"./index-BkOaPNou.js";const U={class:"tag-input"},P={key:0,class:"tags-display"},j=["onClick"],G={class:"input-wrapper"},H=["placeholder","onKeydown"],J={key:0,class:"suggestions"},O=["onMousedown","onMouseenter"],Q={class:"tag-name"},R={class:"tag-count"},W={__name:"TagInput",props:{modelValue:{type:Array,required:!0},placeholder:{type:String,default:"Add tags (comma separated)..."}},emits:["update:modelValue"],setup(p,{emit:k}){const u=p,d=k,S=z(),o=f(""),l=f([]),n=f(-1);let V=null;function x(e){return e.split(",").map(a=>a.trim().toLowerCase().replace(/\s+/g,"_")).filter(a=>a.length>0)}function _(){if(!o.value.trim())return;const e=x(o.value),a=[...u.modelValue];for(const t of e)t&&!a.includes(t)&&a.push(t);d("update:modelValue",a),o.value="",l.value=[]}function A(){if(o.value.includes(",")){const e=o.value.split(","),a=e.pop(),t=e.map(s=>s.trim().toLowerCase().replace(/\s+/g,"_")).filter(s=>s.length>0);if(t.length>0){const s=[...u.modelValue];for(const m of t)s.includes(m)||s.push(m);d("update:modelValue",s)}o.value=a}clearTimeout(V),V=setTimeout(async()=>{const e=o.value.trim();e.length>=1?(l.value=await S.autocomplete(e),n.value=-1):(l.value=[],n.value=-1)},150)}function B(e){d("update:modelValue",u.modelValue.filter(a=>a!==e))}function I(){if(!o.value&&u.modelValue.length>0){const e=[...u.modelValue];e.pop(),d("update:modelValue",e)}}function y(e){u.modelValue.includes(e.name)||d("update:modelValue",[...u.modelValue,e.name]),o.value="",l.value=[],n.value=-1}function M(){l.value.length>0&&n.value>=0?y(l.value[n.value]):_()}function b(){setTimeout(()=>{l.value=[],n.value=-1},150),_()}function D(){l.value.length>0&&(n.value=(n.value+1)%l.value.length)}function L(){l.value.length>0&&(n.value=n.value<=0?l.value.length-1:n.value-1)}return(e,a)=>(i(),r("div",U,[p.modelValue.length>0?(i(),r("div",P,[(i(!0),r(T,null,C(p.modelValue,t=>(i(),r("span",{key:t,class:"tag"},[E(h(t)+" ",1),c("button",{onClick:s=>B(t),class:"remove-tag"},"Ã—",8,j)]))),128))])):w("",!0),c("div",G,[K(c("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>o.value=t),placeholder:p.placeholder,onKeydown:[v(g(M,["prevent"]),["enter"]),v(I,["backspace"]),v(g(D,["prevent"]),["down"]),v(g(L,["prevent"]),["up"])],onInput:A,onBlur:b},null,40,H),[[N,o.value]]),l.value.length>0?(i(),r("ul",J,[(i(!0),r(T,null,C(l.value,(t,s)=>(i(),r("li",{key:t.name,onMousedown:g(m=>y(t),["prevent"]),onMouseenter:m=>n.value=s,class:F({selected:s===n.value}),style:$({borderLeftColor:t.categoryColor})},[c("span",Q,h(t.name),1),c("span",R,h(t.usageCount),1)],46,O))),128))])):w("",!0)]),a[1]||(a[1]=c("div",{class:"hint"},"Separate tags with commas or press Enter",-1))]))}},Y=q(W,[["__scopeId","data-v-f26a676d"]]);export{Y as T};
