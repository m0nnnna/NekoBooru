import{_ as g,r,j as h,a as p,g as u,f as e,h as v,F as k,i as P,y as D,m,B as f,q as x,b as V,o as n,e as B,w as N,t as d}from"./index-DEYafuDQ.js";const $={class:"pools-view"},F={class:"header"},M={class:"pools-grid"},L={class:"pool-desc"},S={class:"pool-meta"},U={key:0,class:"empty-state"},j={class:"modal"},q={class:"form-group"},z={class:"form-group"},A={class:"modal-actions"},E=["disabled"],I={__name:"PoolsView",setup(R){const _=x(),i=r([]),c=r(!0),l=r(!1),a=r({name:"",description:""});h(async()=>{await y()});async function y(){c.value=!0;try{const s=await p.getPools();i.value=s.results}catch(s){console.error("Failed to fetch pools:",s)}finally{c.value=!1}}async function w(){if(a.value.name.trim())try{const s=await p.createPool(a.value);i.value.unshift(s),l.value=!1,a.value={name:"",description:""},_.push(`/pool/${s.id}`)}catch(s){alert("Failed to create pool: "+s.message)}}function C(s){return new Date(s).toLocaleDateString()}return(s,o)=>{const b=V("router-link");return n(),u("div",$,[e("div",F,[o[5]||(o[5]=e("h1",null,"Pools",-1)),e("button",{class:"btn",onClick:o[0]||(o[0]=t=>l.value=!0)},"Create Pool")]),e("div",M,[(n(!0),u(k,null,P(i.value,t=>(n(),B(b,{key:t.id,to:`/pool/${t.id}`,class:"pool-card"},{default:N(()=>[e("h3",null,d(t.name),1),e("p",L,d(t.description||"No description"),1),e("div",S,[e("span",null,d(t.postCount)+" posts",1),e("span",null,d(C(t.createdAt)),1)])]),_:2},1032,["to"]))),128))]),i.value.length===0&&!c.value?(n(),u("div",U," No pools yet. Create one to organize your posts! ")):v("",!0),l.value?(n(),u("div",{key:1,class:"modal-overlay",onClick:o[4]||(o[4]=D(t=>l.value=!1,["self"]))},[e("div",j,[o[8]||(o[8]=e("h2",null,"Create Pool",-1)),e("div",q,[o[6]||(o[6]=e("label",null,"Name",-1)),m(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>a.value.name=t),placeholder:"Pool name"},null,512),[[f,a.value.name]])]),e("div",z,[o[7]||(o[7]=e("label",null,"Description",-1)),m(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=t=>a.value.description=t),placeholder:"Description (optional)",rows:"3"},null,512),[[f,a.value.description]])]),e("div",A,[e("button",{class:"btn btn-secondary",onClick:o[3]||(o[3]=t=>l.value=!1)},"Cancel"),e("button",{class:"btn",onClick:w,disabled:!a.value.name.trim()},"Create",8,E)])])])):v("",!0)])}}},G=g(I,[["__scopeId","data-v-df8aaf66"]]);export{G as default};
