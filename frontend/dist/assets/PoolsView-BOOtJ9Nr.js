import{_ as k,r,j as g,a as p,g as u,f as e,h as v,F as P,i as h,A as x,y as D,m,B as f,q as V,b as N,o as n,e as B,w as $,t as d}from"./index-CMYoRPze.js";const F={class:"pools-view"},M={class:"header"},A={class:"pools-grid"},L={class:"pool-desc"},S={class:"pool-meta"},T={key:0,class:"empty-state"},U={class:"modal"},j={class:"form-group"},q={class:"form-group"},z={class:"modal-actions"},E=["disabled"],I={__name:"PoolsView",setup(R){const _=V(),i=r([]),c=r(!0),l=r(!1),a=r({name:"",description:""});g(async()=>{await y()});async function y(){c.value=!0;try{const s=await p.getPools();i.value=s.results}catch(s){console.error("Failed to fetch pools:",s)}finally{c.value=!1}}async function b(){if(a.value.name.trim())try{const s=await p.createPool(a.value);i.value.unshift(s),l.value=!1,a.value={name:"",description:""},_.push(`/pool/${s.id}`)}catch(s){alert("Failed to create pool: "+s.message)}}function w(s){return new Date(s).toLocaleDateString()}return(s,o)=>{const C=N("router-link");return n(),u("div",F,[e("div",M,[o[5]||(o[5]=e("h1",null,"Pools",-1)),e("button",{class:"btn",onClick:o[0]||(o[0]=t=>l.value=!0)},"Create Pool")]),e("div",A,[(n(!0),u(P,null,h(i.value,t=>(n(),B(C,{key:t.id,to:`/pool/${t.id}`,class:"pool-card"},{default:$(()=>[e("h3",null,d(t.name),1),e("p",L,d(t.description||"No description"),1),e("div",S,[e("span",null,d(t.postCount)+" posts",1),e("span",null,d(w(t.createdAt)),1)])]),_:2},1032,["to"]))),128))]),i.value.length===0&&!c.value?(n(),u("div",T,[...o[6]||(o[6]=[e("div",{class:"neko-face"},"(=^·˘·^=)✋",-1),x(" No pools yet. Create one to organize your posts! ",-1)])])):v("",!0),l.value?(n(),u("div",{key:1,class:"modal-overlay",onClick:o[4]||(o[4]=D(t=>l.value=!1,["self"]))},[e("div",U,[o[9]||(o[9]=e("h2",null,"Create Pool",-1)),e("div",j,[o[7]||(o[7]=e("label",null,"Name",-1)),m(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>a.value.name=t),placeholder:"Pool name"},null,512),[[f,a.value.name]])]),e("div",q,[o[8]||(o[8]=e("label",null,"Description",-1)),m(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=t=>a.value.description=t),placeholder:"Description (optional)",rows:"3"},null,512),[[f,a.value.description]])]),e("div",z,[e("button",{class:"btn btn-secondary",onClick:o[3]||(o[3]=t=>l.value=!1)},"Cancel"),e("button",{class:"btn",onClick:b,disabled:!a.value.name.trim()},"Create",8,E)])])])):v("",!0)])}}},H=k(I,[["__scopeId","data-v-5cdeb7bf"]]);export{H as default};
